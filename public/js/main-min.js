"use strict";{let e="",t="";async function callApi(){const e=await fetch("https://api.exchangerate.host/symbols"),t=await e.json();showSymbols(Object.keys(t.symbols)),setCurrencyAPIURL()}function showSymbols(o){const n=document.getElementById("from"),c=document.getElementById("to");for(let e=0;e<o.length;e++){const t=document.createElement("option");n.appendChild(t),t.textContent=o[e],t.value=o[e]}for(let e=0;e<o.length;e++){const t=document.createElement("option");c.appendChild(t),t.textContent=o[e],t.value=o[e]}const l=localStorage.getItem("shoppingListSetCurrencyFrom"),r=localStorage.getItem("shoppingListSetCurrencyTo");n.selectedIndex=l,c.selectedIndex=r,e=localStorage.getItem("shoppingListSetCurrencyFromValue"),t=localStorage.getItem("shoppingListSetCurrencyToValue")}callApi();const o=document.getElementById("from"),n=document.getElementById("to");function setCurrencyAPIURL(){if(o.value&&n.value){console.log("set both currency"),callApiCurrency(`https://api.exchangerate.host/convert?from=${e}&to=${t}&places=0`)}}o.addEventListener("change",()=>{e=o.value,console.log(e),setCurrencyAPIURL()}),n.addEventListener("change",()=>{t=n.value,console.log(t),setCurrencyAPIURL()});let c=0;async function callApiCurrency(e){const t=e,o=await fetch(t),n=await o.json();c=n.result,console.log("API rate: "+c),showRateSection()}function showRateSection(){const o=document.querySelector(".rate-section");console.log("rate: "+c),o.textContent=`${e} 1 = ${t} ${c}`}function sumAll(){const e=document.querySelectorAll(".product-price");console.log(e);let t=0;const o=document.getElementById("from-total");for(let o=0;o<e.length;o++){t+=Number(e[o].value),console.log(t)}o.textContent=t}showRateSection(),document.getElementById("check").addEventListener("click",()=>{sumAll(),convertPriceCurrency()});const l=[];function convertPriceCurrency(){l.splice(0,l.length);const e=document.querySelectorAll(".product-name"),t=document.querySelectorAll(".product-price");for(let o=0;o<e.length;o++){const n=new Object;let r=e[o].value,s=t[o].value;r||(r="no name"),n.productName=r,n.productPrice=s,n.productPriceConverted=s*c,console.log(n),l.push(n)}const o=document.querySelectorAll(".product-price-calculated");for(let e=0;e<o.length;e++)o[e].textContent=l[e].productPriceConverted;console.log(l);const n=document.getElementById("total-calculated");let r=0;for(let e=0;e<l.length;e++)r+=l[e].productPriceConverted,console.log(l[e].productPriceConverted);n.textContent=r}function generateEmptyProductList(){const e=document.querySelector(".products-list-table tbody"),t=document.createElement("tr"),o=document.createElement("td"),n=document.createElement("td"),c=document.createElement("td"),l=document.createElement("td"),r=document.createElement("input"),s=document.createElement("input"),d=document.createElement("span");e.appendChild(t),t.appendChild(o),t.appendChild(n),t.appendChild(c),t.appendChild(l),t.classList.add("products-list-table__tr"),o.classList.add("products-list-table__td"),n.classList.add("products-list-table__td"),c.classList.add("products-list-table__td"),l.classList.add("products-list-table__td"),o.appendChild(r),c.appendChild(d),d.classList.add("product-price-calculated"),r.type="name",r.value="にんじん",n.appendChild(s),s.type="number",s.value=1,r.classList.add("product-name"),s.classList.add("product-price"),s.classList.add("products-list-table__input"),l.textContent="❌",console.log("生成！")}document.getElementById("btn-add-list").addEventListener("click",()=>{generateEmptyProductList()}),document.getElementById("btn-storage-currency").addEventListener("click",()=>{const e=document.getElementById("from"),t=document.getElementById("to");localStorage.setItem("shoppingListSetCurrencyFrom",e.selectedIndex),localStorage.setItem("shoppingListSetCurrencyTo",t.selectedIndex),localStorage.setItem("shoppingListSetCurrencyFromValue",e.value),localStorage.setItem("shoppingListSetCurrencyToValue",t.value)})}